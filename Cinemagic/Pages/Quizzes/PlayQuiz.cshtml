@page "{Id:int}"
@model Cinemagic.Pages.Quizzes.PlayQuizModel
@{
    ViewData["Title"] = "Play Quiz";
}

<h1>@Model.Quiz.Title</h1>

@if (Model.IsQuizFinished)
{
    <h2>סיימת את החידון!</h2>
    <p>הניקוד שלך: @Model.Score מתוך @Model.Quiz.Questions.Count</p>
    <a href="/Quizzes">חזרה לרשימת חידונים</a>
}
else
{
    @if (Model.Quiz != null && Model.Quiz.Questions != null && Model.Quiz.Questions.Any())
    {
        for (int q = 0; q < Model.Quiz.Questions.Count; q++)
        {
            var question = Model.Quiz.Questions[q];

            <div class="question-block mb-4 p-3 border rounded">
                <label>Question @q:</label>
                <input name="Questions[@q].QuestionText" value="@question.QuestionText" class="form-control mb-2" readonly />

                <h4>📌 question.Options.Count = @question.Options?.Count</h4>
                
                @for (int i = 0; i < question.Options.Count; i++)
                {
                    <p>Option @i: @question.Options[i]</p> <!-- שורת בדיקה -->
                    <input name="Questions[@q].Options[@i]" value="@question.Options[i]" class="form-control mb-1" readonly />
                }

                
            </div>
        }
    }
    else
    {
        <p>No questions found.</p>
    }

    <style>
        .option {
            padding: 10px;
            margin: 6px 0;
            border: 1px solid gray;
            border-radius: 6px;
            text-align: right;
            direction: rtl;
        }

        .correct {
            background-color: #c8f7c5;
        }

        .wrong {
            background-color: #f7c5c5;
        }

        button {
            width: 100%;
        }
    </style>
}
