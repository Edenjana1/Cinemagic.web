@page
@model Cinemagic.Pages.Movies.DetailsModel

@{
    ViewData["Title"] = "Movie Details";
}

<h1 class="text-center mb-5" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-weight: 700; color: #222;">
    @Model.Movie.MovieName
</h1>

<div class="container mx-auto p-4" style="max-width: 720px; background: #fafafa; border-radius: 16px; box-shadow: 0 6px 18px rgba(0,0,0,0.1);">
    <div class="row gx-4 align-items-center">
        <div class="col-auto">
            <img src="~/Images/MovieIMG/@Model.Movie.Image"
                 alt="@Model.Movie.MovieName"
                 style="width: 140px; height: 140px; border-radius: 12px; object-fit: cover; box-shadow: 0 4px 12px rgba(0,0,0,0.1);" />
        </div>

        <div class="col">
            <dl class="row mb-0" style="font-size: 1rem; color: #444;">
                <dt class="col-sm-4 fw-semibold">ז'אנר:</dt>
                <dd class="col-sm-8">@Model.Movie.MovieGenre</dd>

                <dt class="col-sm-4 fw-semibold">תיאור:</dt>
                <dd class="col-sm-8">@Model.Movie.MovieDescription</dd>

                <dt class="col-sm-4 fw-semibold">תאריך יציאה:</dt>
                <dd class="col-sm-8">@Model.Movie.ReleaseDate.ToString("dd/MM/yyyy")</dd>

                <dt class="col-sm-4 fw-semibold">דירוג גיל:</dt>
                <dd class="col-sm-8">@Model.Movie.AgeRate</dd>

                <dt class="col-sm-4 fw-semibold">מחיר:</dt>
                <dd class="col-sm-8">@Model.Movie.MoviePrice ₪</dd>

            </dl>
        </div>
    </div>
</div>

<div class="text-center my-5">
    <a asp-page="/Purchases/CreateMovieP" asp-route-movieid="@Model.Movie.MovieID"
       class="btn btn-outline-primary px-5 py-2"
       style="border-radius: 24px; font-weight: 600; font-size: 1.1rem; transition: background-color 0.3s, color 0.3s;">
        קנייה עכשיו
    </a>
</div>

<div class="container mx-auto" style="max-width: 720px;">
    <h3 class="mb-4" style="font-weight: 600; color: #333; border-bottom: 2px solid #eee; padding-bottom: 6px;">תגובות:</h3>
    @if (Model.MovieComments.Any())
    {
        @foreach (var comment in Model.MovieComments)
        {
            <div class="mb-3 p-3" style="background: #fff; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                <small class="text-muted d-block mb-1" style="font-size: 0.85rem;">
                    @comment.CommentDate.ToString("dd/MM/yyyy HH:mm")
                </small>
                <p style="margin: 0; color: #555;">@comment.Content</p>
            </div>
        }
    }
    else
    {
        <p class="text-center" style="color: #777; font-style: italic;">אין תגובות עדיין לסרט זה.</p>
    }
</div>

<div class="container mx-auto" style="max-width: 720px;">
    <h4 class="mt-5 mb-3" style="font-weight: 600; color: #333;">הוסף תגובה חדשה:</h4>
    <form method="post">
        <textarea asp-for="NewComment.Content"
                  class="form-control mb-3"
                  rows="4"
                  placeholder="כתוב כאן את התגובה שלך..."
                  style="border-radius: 12px; border: 1px solid #ccc; resize: vertical;"></textarea>
        <span asp-validation-for="NewComment.Content" class="text-danger fw-semibold"></span>
        <div class="text-center">
            <button type="submit" class="btn btn-primary px-4 py-2" style="border-radius: 24px; font-weight: 600;">
                שלח
            </button>
        </div>
    </form>
</div>
