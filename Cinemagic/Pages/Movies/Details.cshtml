@page
@model Cinemagic.Pages.Movies.DetailsModel

@{
    ViewData["Title"] = "Movie Details";
}

<h1 class="movie-title">@Model.Movie.MovieName</h1>

<div class="movie-details-container">
    <div class="movie-image">
        <img src="~/Images/MovieIMG/@Model.Movie.Image"
             alt="@Model.Movie.MovieName" style="width: 150px; height: 150px; border-radius: 10px;" />
    </div>

    <div class="movie-info">
        <p><strong>Genre:</strong> @Model.Movie.MovieGenre</p>
        <p><strong>Description:</strong> @Model.Movie.MovieDescription</p>
        <p><strong>Release Date:</strong> @Model.Movie.ReleaseDate.ToString("dd/MM/yyyy")</p>
        <p><strong>Age Rating:</strong> @Model.Movie.
        
        
        
        </p>
        <p><strong>Price:</strong> @Model.Movie.MoviePrice ₪</p>
    </div>
</div>

<!-- כפתור רכישה -->
<div class="purchase-button-container">
    <a asp-page="/Purchases/CreateMovieP" asp-route-movieid="@Model.Movie.MovieID" class="btn btn-primary">קנייה עכשיו</a>

</div>

@* <!-- כפתורי עריכה וניווט -->
<a asp-page="./Edit" asp-route-id="@Model.Movie.MovieID" class="btn btn-primary mt-3">Edit</a>
<a asp-page="./Delete" asp-route-id="@Model.Movie.MovieID" class="btn btn-danger mt-3">Delete Movie</a> *@

<a asp-page="./Index" class="btn btn-secondary mt-3">Back to List</a>

<h3>תגובות:</h3>
@if (Model.MovieComments.Any())
{
    @foreach (var comment in Model.MovieComments)
    {
        <div class="comment border p-2 my-2">
            <small>@comment.CommentDate.ToString("dd/MM/yyyy HH:mm")</small><br />
            @* <strong>נכתב על ידי ת"ז: @comment.User?.IdintityCard</strong> *@
            <p>@comment.Content</p>
        </div>
    }
}
else
{
    <p>אין תגובות עדיין לסרט זה.</p>
}

<h4>הוסף תגובה חדשה:</h4>
<form method="post">
    <div class="mb-3">
        <textarea asp-for="NewComment.Content" class="form-control" rows="3" placeholder="כתוב כאן את התגובה שלך..."></textarea>
        <span asp-validation-for="NewComment.Content" class="text-danger"></span>
    </div>
    <button type="submit" class="btn btn-primary">שלח</button>
</form>
